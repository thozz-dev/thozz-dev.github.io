<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galerie Portfolio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Montserrat', sans-serif;
            transition: background-color 0.5s, color 0.5s;
        }

        :root {
            --bg-color: #0a0a0a;
            --text-color: #fff;
            --accent-color: #555;
            --secondary-color: #333;
            --highlight-color: #fff;
            --overlay-color: rgba(0, 0, 0, 0.7);
            --transition-speed: 0.5s;
        }

        body.light-theme {
            --bg-color: #f0f0f0;
            --text-color: #111;
            --accent-color: #ddd;
            --secondary-color: #ccc;
            --highlight-color: #000;
            --overlay-color: rgba(255, 255, 255, 0.7);
        }

        body.custom-theme {
            --bg-color: #0e1a2b;
            --text-color: #e4f1fe;
            --accent-color: #1e3a5f;
            --secondary-color: #3b6598;
            --highlight-color: #64b6ff;
            --overlay-color: rgba(14, 26, 43, 0.7);
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color var(--transition-speed),
                color var(--transition-speed);
        }

        header {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .header-content {
            z-index: 2;
            text-align: center;
        }

        h1 {
            font-size: 5vw;
            letter-spacing: 1px;
            margin-bottom: 20px;
            font-weight: 300;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeIn 1s ease forwards 0.3s;
        }

        .header-content p {
            font-size: 1.2rem;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeIn 1s ease forwards 0.6s;
            max-width: 600px;
            margin: 0 auto;
        }

        .scroll-indicator {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            animation: fadeIn 1s ease forwards 1s, bounce 2s infinite 1s;
        }

        .scroll-indicator span {
            display: block;
            width: 30px;
            height: 30px;
            border-bottom: 2px solid var(--text-color);
            border-right: 2px solid var(--text-color);
            transform: rotate(45deg);
        }

        nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            transition: background-color 0.3s;
        }

        nav.scrolled {
            background-color: var(--overlay-color);
            padding: 15px 40px;
            backdrop-filter: blur(10px);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 2px;
            text-decoration: none;
            color: var(--text-color);
        }

        .menu {
            display: flex;
            gap: 30px;
        }

        .menu a {
            text-decoration: none;
            color: var(--text-color);
            font-size: 0.9rem;
            letter-spacing: 1px;
            text-transform: uppercase;
            transition: color 0.3s;
            position: relative;
        }

        .menu a:after {
            content: '';
            position: absolute;
            width: 0;
            height: 1px;
            bottom: -4px;
            left: 0;
            background-color: var(--text-color);
            transition: width 0.3s ease;
        }

        .menu a:hover:after {
            width: 100%;
        }

        .hamburger {
            display: none;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--text-color);
            background: none;
            border: none;
            z-index: 1000;
        }

        .categories {
            padding: 60px 0;
            position: relative;
        }

        .category-nav {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
            gap: 30px;
            flex-wrap: wrap;
        }

        .category-btn {
            background: none;
            border: none;
            color: #888;
            font-size: 1rem;
            padding: 5px 10px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .category-btn:after {
            content: '';
            position: absolute;
            width: 0;
            height: 1px;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--text-color);
            transition: width 0.3s ease;
        }

        .category-btn:hover {
            color: var(--text-color);
        }

        .category-btn:hover:after {
            width: 80%;
        }

        .category-btn.active {
            color: var(--text-color);
        }

        .category-btn.active:after {
            width: 80%;
        }

        .gallery {
            columns: 4;
            column-gap: 10px;
            padding: 10px;
            max-width: 1800px;
            margin: 0 auto;
            opacity: 0;
            animation: fadeIn 1s ease forwards;
        }

        @media (max-width: 1200px) {
            .gallery {
                columns: 3;
            }
        }

        @media (max-width: 768px) {
            .gallery {
                columns: 2;
            }
        }

        @media (max-width: 480px) {
            .gallery {
                columns: 1;
            }
        }

        .gallery-item {
            position: relative;
            width: 100%;
            margin-bottom: 10px;
            break-inside: avoid;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            background: var(--bg-color);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .gallery-item img {
            width: 100%;
            max-height: 250px;
            height: auto;
            display: block;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .gallery-item:hover img {
            transform: scale(1.05);
        }

        .gallery-item-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            background: linear-gradient(
                to top,
                rgba(0, 0, 0, 0.8) 0%,
                rgba(0, 0, 0, 0.6) 50%,
                transparent 100%
            );
            color: white;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }

        .gallery-item:hover .gallery-item-overlay {
            opacity: 1;
            transform: translateY(0);
        }

        .gallery-item-title {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 5px;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .gallery-item-desc {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .gallery-item.loading {
            filter: blur(10px);
            transform: scale(0.95);
        }

        .gallery-item.loaded {
            filter: blur(0);
            transform: scale(1);
        }

        .gallery-item.wide {
            grid-column: span 2;
        }

        .gallery-item.tall {
            grid-row: span 2;
        }

        .gallery-item.large {
            grid-column: span 2;
            grid-row: span 2;
        }

        @media (max-width: 1800px) {
            .gallery-item img {
                height: 200px;
            }
        }

        @media (max-width: 1200px) {
            .gallery {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                grid-auto-rows: 300px;
                gap: 15px;
                padding: 15px;
            }

            .gallery-item img {
                height: 200px;
            }
        }

        @media (max-width: 768px) {
            .gallery {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                grid-auto-rows: 250px;
                gap: 12px;
                padding: 12px;
            }

            .gallery-item img {
                height: 150px;
            }

            .gallery-item.wide,
            .gallery-item.tall,
            .gallery-item.large {
                grid-column: span 1;
                grid-row: span 1;
            }

            .gallery-item-overlay {
                padding: 20px 15px;
            }

            .gallery-item-title {
                font-size: 1.1rem;
            }

            .gallery-item-desc {
                font-size: 0.85rem;
            }
        }

        @media (max-width: 480px) {
            .gallery {
                grid-template-columns: 1fr;
                grid-auto-rows: 280px;
                gap: 10px;
                padding: 10px;
            }

            .gallery-item img {
                height: 10px;
            }

            .gallery-item-overlay {
                opacity: 1;
                transform: translateY(0);
                background: linear-gradient(
                    to top,
                    rgba(0, 0, 0, 0.9) 0%,
                    rgba(0, 0, 0, 0.7) 50%,
                    rgba(0, 0, 0, 0.3) 100%
                );
            }
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            pointer-events: auto;
        }

        .modal-content {
            max-width: 90%;
            max-height: 90%;
            transform: scale(0.9);
            transition: transform 0.3s ease;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            pointer-events: none;
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2.5rem;
            color: var(--text-color);
            background: none;
            border: none;
            cursor: pointer;
        }

        .modal-nav {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            transform: translateY(-50%);
            padding: 0 40px;
        }

        .modal-nav button {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 2rem;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        .modal-nav button:hover {
            opacity: 1;
        }

        .contact {
            padding: 100px 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .contact h2 {
            font-size: 3rem;
            margin-bottom: 30px;
            font-weight: 300;
        }

        .contact-info {
            display: flex;
            gap: 60px;
            margin-top: 40px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .contact-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .contact-icon {
            font-size: 2rem;
        }

        .social-links {
            display: flex;
            gap: 20px;
            margin-top: 60px;
        }

        .social-link {
            width: 40px;
            height: 40px;
            border: 1px solid var(--text-color);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s;
        }

        .social-link:hover {
            background-color: var(--text-color);
            color: var(--bg-color);
        }

        footer {
            padding: 20px;
            text-align: center;
            border-top: 1px solid #222;
        }

        @keyframes bounce {
            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateX(-50%) translateY(0);
            }

            40% {
                transform: translateX(-50%) translateY(-20px);
            }

            60% {
                transform: translateX(-50%) translateY(-10px);
            }
        }

        .theme-selector {
            position: fixed;
            right: 20px;
            bottom: 20px;
            z-index: 50;
            display: flex;
            gap: 10px;
        }

        .theme-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid var(--text-color);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .theme-btn:hover {
            transform: scale(1.2);
        }

        .dark-theme-btn {
            background-color: #0a0a0a;
        }

        .light-theme-btn {
            background-color: #f5f5f5;
        }

        .custom-theme-btn {
            background-color: #132639;
        }

        #about {
            padding: 100px 40px;
            overflow: hidden;
        }

        .about-section {
            padding: 100px 40px;
            position: relative;
            overflow: hidden;
        }

        .about-container {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
            margin-bottom: 80px;
        }

        .about-image {
            flex: 1;
            min-width: 300px;
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            height: 400px;
        }

        .about-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.7s ease;
        }

        .about-image img:hover {
            transform: scale(1.05);
        }

        .about-content {
            flex: 1;
            min-width: 300px;
        }

        .about-timeline {
            margin-top: 60px;
            position: relative;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            padding: 40px 0 80px 0;
        }

        .timeline-track {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 100%;
            background-color: #333;
            top: 0;
        }

        .timeline-item {
            margin-bottom: 60px;
            position: relative;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
            min-height: 120px;
        }

        .timeline-item.active {
            opacity: 1;
            transform: translateY(0);
        }

        .timeline-date {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            background-color: #222;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            color: #ddd;
            top: 20px;
            z-index: 2;
        }

        .timeline-content {
            width: calc(50% - 30px);
            background-color: rgba(20, 20, 20, 0.7);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(5px);
        }

        .timeline-item:nth-child(odd) .timeline-content {
            margin-left: auto;
            margin-right: 15px;
        }

        .timeline-item:nth-child(even) .timeline-content {
            margin-right: auto;
            margin-left: 15px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            background-color: #4d90fe;
            border-radius: 50%;
            top: 22px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
            box-shadow: 0 0 0 4px rgba(77, 144, 254, 0.3);
        }

        @media (max-width: 768px) {
            .timeline-track {
                left: 40px;
            }
            
            .timeline-date {
                left: 40px;
                top: 0;
                transform: none;
            }
            
            .timeline-content {
                width: calc(100% - 80px);
                margin-left: 80px !important;
                margin-right: 0 !important;
            }
            
            .timeline-item::before {
                left: 40px;
                transform: none;
            }
            
            .timeline-item {
                margin-bottom: 50px;
                padding-top: 30px;
            }
        }

        .focus-mode {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 1100;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .focus-mode.active {
            opacity: 1;
            pointer-events: auto;
        }

        .focus-container {
            width: 90%;
            height: 90%;
            max-width: 1600px;
            position: relative;
            display: flex;
        }

        .focus-image-container {
            flex: 2;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            margin-right: 15px;
        }

        .focus-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            transform: scale(0.9);
            transition: transform 0.5s ease;
        }

        .focus-mode.active .focus-image {
            transform: scale(1);
        }

        .focus-details {
            flex: 1;
            height: 100%;
            padding: 40px;
            overflow-y: auto;
            background-color: rgba(20, 20, 20, 0.7);
            backdrop-filter: blur(10px);
            transform: translateX(100%);
            transition: transform 0.5s ease;
        }

        .focus-mode.active .focus-details {
            transform: translateX(0);
        }

        .focus-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2rem;
            color: #fff;
            background: none;
            border: none;
            cursor: pointer;
            z-index: 1;
        }

        .exif-data {
            margin-top: 30px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .exif-item {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .exif-label {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-bottom: 5px;
        }

        .exif-value {
            font-size: 1.2rem;
            font-weight: 500;
        }

        .photo-inspiration {
            margin-top: 30px;
        }

        .inspiration-images {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            overflow-x: auto;
            padding-bottom: 15px;
        }

        .inspiration-image {
            width: 100px;
            height: 100px;
            flex-shrink: 0;
            border-radius: 5px;
            overflow: hidden;
        }

        .inspiration-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .map-container {
            position: relative;
            width: 30%;
            height: 500px;
            margin: 30px auto;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .category-description {
            margin-top: 5px;
            font-size: 1.2rem;
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
            padding: 0 15px;
            margin-bottom: 30px;
        }

        @media (max-width: 992px) {
            .map-container {
                width: 95%;
            }
        }

        @media (max-width: 768px) {
            .map-container {
                width: 95%;
            }
        }

        @media (max-width: 480px) {
            .map-container {
                width: 95%;
            }
        }

        .map {
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .map-overlay {
            position: absolute;
            top: 10px;
            left: 50px;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 2;
        }

        .map-title {
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 18px;
            color: #000;
        }

        .map-controls {
            display: flex;
            gap: 10px;
        }

        .map-btn {
            background-color: #f0f0f0;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .map-btn:hover {
            background-color: #e0e0e0;
        }

        .map-btn.active {
            background-color: #4d90fe;
            color: white;
        }

        .popup-content {
            text-align: center;
            max-width: 250px;
        }

        .popup-content h4 {
            margin: 8px 0 4px;
        }

        .popup-content p {
            margin: 0;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }

            .header-content p {
                font-size: 1rem;
                padding: 0 20px;
            }

            .gallery {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                padding: 0 15px;
                gap: 15px;
            }

            .gallery-item.wide,
            .gallery-item.tall,
            .gallery-item.large {
                grid-column: span 1;
                grid-row: span 1;
            }

            .gallery-item-overlay {
                padding: 20px 15px;
            }

            .gallery-item-title {
                font-size: 1rem;
            }

            .gallery-item-desc {
                font-size: 0.8rem;
            }

            .focus-mode .focus-container {
                flex-direction: column;
                height: auto;
                max-height: 90vh;
            }

            .focus-image-container {
                height: 50vh;
                margin-right: 0;
            }

            .focus-details {
                height: auto;
                max-height: 40vh;
                padding: 20px;
            }

            .exif-data {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .exif-item {
                padding: 8px;
            }

            .exif-label {
                font-size: 0.7rem;
            }

            .exif-value {
                font-size: 1rem;
            }

            .about-container {
                padding: 0 15px;
            }

            .about-image {
                height: 300px;
            }

            .contact-info {
                gap: 30px;
            }

            .social-links {
                gap: 15px;
            }

            .social-link {
                width: 35px;
                height: 35px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 2rem;
            }

            .gallery {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .gallery-item.wide,
            .gallery-item.tall,
            .gallery-item.large {
                grid-column: span 1;
                grid-row: span 1;
            }

            .focus-mode .focus-container {
                width: 95%;
            }

            .focus-image-container {
                height: 40vh;
            }

            .focus-details {
                max-height: 50vh;
                padding: 15px;
            }

            .exif-data {
                grid-template-columns: 1fr;
            }

            .about-image {
                height: 250px;
            }

            .contact-info {
                flex-direction: column;
                gap: 20px;
            }

            .social-links {
                gap: 10px;
            }

            .social-link {
                width: 30px;
                height: 30px;
            }
        }

        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-color);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease;
        }

        .loader {
            width: 40px;
            height: 40px;
            border: 2px solid #333;
            border-top: 2px solid var(--text-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .loading-text {
            position: absolute;
            bottom: 30%;
            font-size: 1rem;
            letter-spacing: 5px;
            text-transform: uppercase;
            color: var(--text-color);
        }

        .hidden {
            opacity: 0;
            pointer-events: none;
        }

        .cursor {
            width: 20px;
            height: 20px;
            border: 1px solid var(--text-color);
            border-radius: 50%;
            position: fixed;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 9999;
            mix-blend-mode: difference;
            transition: width 0.3s, height 0.3s, background-color 0.3s;
        }

        .cursor-follower {
            width: 8px;
            height: 8px;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            position: fixed;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 9999;
            transition: 0.1s ease;
        }

        .hover-effect {
            width: 50px;
            height: 50px;
            background-color: var(--hover-color);
        }

        .cursor-hidden {
            opacity: 0;
        }

        .section-title {
            font-size: 2.5rem;
            margin-bottom: 60px;
            text-align: center;
            font-weight: 300;
            letter-spacing: 2px;
        }

        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 1s ease;
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        .noise-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48ZmlsdGVyIGlkPSJhIiB4PSIwIiB5PSIwIj48ZmVUdXJidWxlbmNlIGJhc2VGcmVxdWVuY3k9Ii43NSIgc3RpdGNoVGlsZXM9InN0aXRjaCIgdHlwZT0iZnJhY3RhbE5vaXNlIi8+PGZlQ29sb3JNYXRyaXggdHlwZT0ic2F0dXJhdGUiIHZhbHVlcz0iMCIvPjwvZmlsdGVyPjxwYXRoIGQ9Ik0wIDBoMjAwdjIwMEgweiIgZmlsdGVyPSJ1cmwoI2EpIiBvcGFjaXR5PSIuMDUiLz48L3N2Zz4=');
            pointer-events: none;
            z-index: 1;
            opacity: 0.3;
        }

        .parallax-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.2;
        }

        .theme-switcher {
            position: fixed;
            top: 100px;
            right: 20px;
            z-index: 999;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .theme-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid var(--text-color);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .theme-btn:hover {
            transform: scale(1.1);
        }

        .dark-btn {
            background-color: #0a0a0a;
        }

        .light-btn {
            background-color: #f0f0f0;
        }

        .custom-btn {
            background: linear-gradient(135deg, #0e1a2b, #3b6598);
        }

        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }

            .menu {
                position: fixed;
                top: 0;
                right: -100%;
                width: 70%;
                height: 100vh;
                background-color: var(--bg-color);
                flex-direction: column;
                justify-content: center;
                align-items: center;
                gap: 40px;
                transition: right 0.3s ease;
                backdrop-filter: blur(10px);
                z-index: 999;
            }

            .menu.active {
                right: 0;
            }

            .menu a {
                font-size: 1.2rem;
            }

            nav {
                padding: 15px 20px;
            }
        }
    </style>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</head>

<body>
    <div class="loading-screen">
        <div class="loader"></div>
        <div class="loading-text">CHARGEMENT</div>
    </div>

    <div class="cursor"></div>
    <div class="cursor-follower"></div>
    <div class="noise-overlay"></div>
    <div class="parallax-bg"></div>

    <nav>
        <a href="#" class="logo">PORTFOLIO</a>
        <div class="menu">
            <a href="#categories">Galerie</a>
            <a href="#about">À Propos</a>
            <a href="#map-section">Carte</a>
            <a href="#contact">Contact</a>
        </div>
        <div class="hamburger">
            <i class="fas fa-bars"></i>
        </div>
    </nav>

    <header>
        <div class="header-content">
            <h1>CAPTURER L'INSTANT</h1>
            <p>Une collection de moments figés dans le temps, révélant la beauté du monde à travers un regard unique.</p>
        </div>
    </header>

    <section id="categories" class="categories">
        <h2 class="section-title reveal">Galerie</h2>
        <div class="category-nav reveal">
            <button class="category-btn active" data-category="all">Tout</button>
            <button class="category-btn" data-category="nature">Nature</button>
            <button class="category-btn" data-category="portrait">Portrait</button>
            <button class="category-btn" data-category="urban">Urbain</button>
            <button class="category-btn" data-category="abstract">Abstrait</button>
        </div>

        <div class="category-description reveal">
            Explorez les différentes dimensions de mon travail photographique. Chaque catégorie révèle une facette
            unique de ma vision artistique, capturant l'essence des sujets avec authenticité et émotion.
        </div>

        <div class="gallery reveal">
            <!-- Les images sont chargées dynamiquement par JavaScript -->
        </div>
    </section>

    <section id="about" class="about-section reveal">
        <h2 class="section-title">À propos</h2>
        <div class="about-container">
            <div class="about-image reveal">
                <img src="images/background.jpg" alt="Photographe">
            </div>
            <div class="about-content reveal">
                <h3>Ma passion pour l'image</h3>
                <p>Bienvenue dans mon univers photographique. Je suis passionné par la capture d'instants uniques, de
                    moments fugaces qui racontent une histoire. Mon approche mêle technique précise et sensibilité
                    artistique.</p>
                <p>Chaque photographie est une fenêtre sur ma vision du monde, une tentative de saisir l'émotion et la
                    beauté dans leur forme la plus pure.</p>
                <h3>Ma démarche</h3>
                <p>Je cherche constamment à explorer les frontières entre lumière et ombre, entre l'évident et le
                    subtil. Mon travail est influencé par les grands maîtres de la photographie ainsi que par mes
                    expériences personnelles et mes voyages.</p>
            </div>
        </div>

        <div class="about-timeline reveal">
            <div class="timeline-track"></div>
            <div class="timeline-item">
                <div class="timeline-date">2015</div>
                <div class="timeline-content">
                    <h4>Premiers pas</h4>
                    <p>Découverte de la photographie argentique et développement d'une passion pour l'image.</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">2017</div>
                <div class="timeline-content">
                    <h4>Formation technique</h4>
                    <p>Apprentissage intensif des techniques photographiques et développement d'un style personnel.</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">2019</div>
                <div class="timeline-content">
                    <h4>Première exposition</h4>
                    <p>Présentation de ma série "Fragments urbains" lors d'une exposition collective à Paris.</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">2021</div>
                <div class="timeline-content">
                    <h4>Exploration nature</h4>
                    <p>Nouveau tournant artistique avec une immersion dans la photographie de paysage et de nature.</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">2023</div>
                <div class="timeline-content">
                    <h4>Reconnaissance internationale</h4>
                    <p>Publication dans plusieurs magazines spécialisés et mention honorable lors du concours
                        International Photography Awards.</p>
                </div>
            </div>
        </div>
    </section>

    <div class="theme-switcher">
        <div class="theme-btn dark-btn" data-theme="dark"></div>
        <div class="theme-btn light-btn" data-theme="light"></div>
        <div class="theme-btn custom-btn" data-theme="custom"></div>
    </div>

    <div class="focus-mode">
        <button class="focus-close">&times;</button>
        <div class="focus-container">
            <div class="focus-image-container">
                <img src="" alt="" class="focus-image">
            </div>
            <div class="focus-details">
                <h3 class="focus-title">Titre de la photo</h3>
                <p class="focus-description">Description détaillée de la photographie.</p>

                <div class="exif-data">
                    <div class="exif-item">
                        <span class="exif-label">Appareil</span>
                        <span class="exif-value camera-model">Canon EOS R5</span>
                    </div>
                    <div class="exif-item">
                        <span class="exif-label">Objectif</span>
                        <span class="exif-value lens">24-70mm f/2.8</span>
                    </div>
                    <div class="exif-item">
                        <span class="exif-label">Focale</span>
                        <span class="exif-value focal-length">50mm</span>
                    </div>
                    <div class="exif-item">
                        <span class="exif-label">Ouverture</span>
                        <span class="exif-value aperture">f/4.0</span>
                    </div>
                    <div class="exif-item">
                        <span class="exif-label">Vitesse</span>
                        <span class="exif-value shutter-speed">1/250s</span>
                    </div>
                    <div class="exif-item">
                        <span class="exif-label">ISO</span>
                        <span class="exif-value iso">400</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <section id="map-section" class="map-section reveal">
        <h2 class="section-title">Mes lieux de photographie</h2>
        <p class="category-description">Découvrez les lieux qui ont inspiré mes photographies à travers le monde.</p>

        <div class="map-container reveal">
            <div class="map" id="photo-map"></div>
            <div class="map-overlay">
                <h3 class="map-title">Carte des photos</h3>
                <div class="map-controls">
                    <button class="map-btn" data-filter="all">Tous</button>
                    <button class="map-btn" data-filter="nature">Nature</button>
                    <button class="map-btn" data-filter="urban">Urbain</button>
                </div>
            </div>
            <div class="map-popup">
                <div class="map-popup-image">
                    <img src="" alt="">
                </div>
                <h4 class="map-popup-title"></h4>
                <p class="map-popup-desc"></p>
            </div>
        </div>
    </section>

    <section id="contact" class="reveal">
        <h2 class="section-title">Contact</h2>
        <div class="contact-info reveal">
            <div class="contact-item">
                <i class="fas fa-envelope contact-icon"></i>
                <span>contact@portfolio.com</span>
            </div>
            <div class="contact-item">
                <i class="fas fa-phone contact-icon"></i>
                <span>+33 6 12 34 56 78</span>
            </div>
            <div class="contact-item">
                <i class="fas fa-map-marker-alt contact-icon"></i>
                <span>Paris, France</span>
            </div>
        </div>
        <div class="social-links reveal">
            <a href="https://www.facebook.com/" class="social-link"><i class="fab fa-facebook"></i></a>
            <a href="https://www.instagram.com/" class="social-link"><i class="fab fa-instagram"></i></a>
            <a href="https://www.twitter.com/" class="social-link"><i class="fab fa-twitter"></i></a>
        </div>
    </section>

    <footer>
        <p>&copy; 2025 Portfolio Photographique. Tous droits réservés.</p>
    </footer>

    <script type="module">
        import { historyService, createHistoryButtons } from './history-service.js';
        
        document.addEventListener('DOMContentLoaded', function () {
            initializeGalleryData();
            initializeGalleryLayout();
            initializeThemeSwitcher();
            initializeFocusMode();
            initializeModalControls();
            initializeCustomCursor();
            initializeNavigation();
            createHistoryButtons();
            
            historyService.pushState({
                items: window.galleryItems,
                timestamp: Date.now()
            });
            
            setTimeout(() => {
                const loadingScreen = document.querySelector('.loading-screen');
                if (loadingScreen) {
                    loadingScreen.classList.add('hidden');
                }
                reveal();
            }, 1500);
            window.addEventListener('scroll', reveal);
            window.addEventListener('scroll', updateNavbarOnScroll);
        });

        function initializeScrollEffects() {
            window.addEventListener('scroll', function() {
                const scrollPosition = window.scrollY;
                reveal();
            });
            
            console.log("Scroll effects initialized");
        }

        function reveal() {
            const reveals = document.querySelectorAll('.reveal');
            
            reveals.forEach((element) => {
                const windowHeight = window.innerHeight;
                const elementTop = element.getBoundingClientRect().top;
                const elementVisible = 150;
                
                if (elementTop < windowHeight - elementVisible) {
                    element.classList.add('active');
                }
            });
        }

        function updateNavbarOnScroll() {
            const navbar = document.querySelector('nav');
            if (window.scrollY > 100) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        }

        function initializeGalleryData() {
            try {
                const storedItems = localStorage.getItem('galleryItems');
                window.galleryItems = storedItems ? JSON.parse(storedItems) : [];
                
                if (!window.galleryItems || !Array.isArray(window.galleryItems) || window.galleryItems.length === 0) {
                    window.galleryItems = [
                        {
                            id: 1,
                            category: "nature",
                            title: "Cascade Mystique",
                            description: "Eau cristalline tombant sur des rochers moussus",
                            thumbnail: "images/2.jpg",
                            fullImage: "images/2.jpg",
                            geoLocation: [10.8992, 10.1294],
                            tags: ["montagne", "coucher de soleil", "nature"]
                        }
                    ];
                    localStorage.setItem('galleryItems', JSON.stringify(window.galleryItems));
                }
                
                window.filteredItems = Array.isArray(window.galleryItems) ? [...window.galleryItems] : [];
                window.currentIndex = 0;
                
                preloadImagesWithErrorHandling();
            } catch (error) {
                console.error('Erreur lors de l\'initialisation des données de la galerie:', error);
                window.galleryItems = [];
                window.filteredItems = [];
                window.currentIndex = 0;
            }
        }

        function preloadImagesWithErrorHandling() {
            window.galleryItems.forEach(item => {
                const img = new Image();
                img.onerror = function() {
                    console.warn(`Image not found: ${item.fullImage}`);
                };
                img.src = item.fullImage;
            });
        }

        function initializeGalleryLayout() {
            const gallery = document.querySelector('.gallery');
            const categoryBtns = document.querySelectorAll('.category-btn');

            if (!gallery) return;
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    categoryBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    loadGallery(btn.dataset.category);
                });
            });
            loadGallery('all');
        }

        function loadGallery(category = 'all') {
            const gallery = document.querySelector('.gallery');
            gallery.innerHTML = '';

            window.filteredItems = category === 'all'
                ? [...window.galleryItems]
                : window.galleryItems.filter(item => item.category === category);

            window.filteredItems.forEach((item, index) => {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'gallery-item reveal';
                galleryItem.dataset.id = item.id;
                galleryItem.dataset.category = item.category;

                // Créer l'image et attendre son chargement pour déterminer ses dimensions
                const img = new Image();
                img.onload = function() {
                    const width = this.width;
                    const height = this.height;
                    const ratio = width / height;

                    // Déterminer la taille de l'élément en fonction du ratio
                    if (ratio > 1.5) {
                        galleryItem.classList.add('wide');
                    } else if (ratio < 0.7) {
                        galleryItem.classList.add('tall');
                    } else if (ratio > 1.3 && ratio < 1.5 && Math.random() > 0.5) {
                        galleryItem.classList.add('large');
                    }

                    galleryItem.innerHTML = `
                        <img src="${item.thumbnail}" alt="${item.title}" loading="lazy">
                        <div class="gallery-item-overlay">
                            <h3 class="gallery-item-title">${item.title}</h3>
                            <p class="gallery-item-desc">${item.description}</p>
                        </div>
                    `;

                    // Animation d'apparition progressive
                    setTimeout(() => {
                        galleryItem.classList.add('active');
                    }, 50 * index);

                    // Ajouter les événements
                    galleryItem.addEventListener('click', () => openFocusMode(item, index));
                };

                // Gérer les erreurs de chargement d'image
                img.onerror = function() {
                    console.warn(`Impossible de charger l'image: ${item.thumbnail}`);
                    galleryItem.innerHTML = `
                        <div class="gallery-item-error">
                            <i class="fas fa-image"></i>
                            <p>Image non disponible</p>
                        </div>
                    `;
                };

                // Commencer le chargement de l'image
                img.src = item.thumbnail;
                gallery.appendChild(galleryItem);
            });

            // Optimisation du chargement des images
            if ('loading' in HTMLImageElement.prototype) {
                document.querySelectorAll('img[loading="lazy"]').forEach(img => {
                    img.setAttribute('loading', 'lazy');
                });
            }
        }

        function initializeThemeSwitcher() {
            const themeButtons = document.querySelectorAll('.theme-btn');
            const savedTheme = localStorage.getItem('theme') || 'dark';
            applyTheme(savedTheme);
            themeButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const theme = this.dataset.theme;
                    applyTheme(theme);
                    localStorage.setItem('theme', theme);
                });
            });
        }

        function applyTheme(theme) {
            document.body.className = '';

            if (theme === 'light') {
                document.body.classList.add('light-theme');
            } else if (theme === 'custom') {
                document.body.classList.add('custom-theme');
            }
            document.body.style.transition = 'background-color 0.5s, color 0.5s';
            const themeButtons = document.querySelectorAll('.theme-btn');
            themeButtons.forEach(btn => {
                btn.style.transform = btn.dataset.theme === theme ? 'scale(1.2)' : 'scale(1)';
                btn.style.boxShadow = btn.dataset.theme === theme ? '0 0 10px rgba(255,255,255,0.5)' : 'none';
            });
        }

        function initializeFocusMode() {
            const focusMode = document.querySelector('.focus-mode');
            const closeBtn = document.querySelector('.focus-close');

            if (!focusMode || !closeBtn) return;
            closeBtn.addEventListener('click', closeFocusMode);
            focusMode.addEventListener('click', function (e) {
                if (e.target === focusMode) {
                    closeFocusMode();
                }
            });
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape' && focusMode.classList.contains('active')) {
                    closeFocusMode();
                }
            });
        }

        function openFocusMode(item, index) {
            const focusMode = document.querySelector('.focus-mode');
            const focusImage = document.querySelector('.focus-image');
            const focusTitle = document.querySelector('.focus-title');
            const focusDescription = document.querySelector('.focus-description');
            const contextText = document.querySelector('.context-text');
            const inspirationImages = document.querySelector('.inspiration-images');

            if (!focusMode || !focusImage) return;

            window.currentIndex = index;

            focusImage.src = item.fullImage;
            focusTitle.textContent = item.title;
            focusDescription.textContent = item.description;

            const exifData = generateExifData(item);
            document.querySelector('.camera-model').textContent = exifData.camera;
            document.querySelector('.lens').textContent = exifData.lens;
            document.querySelector('.focal-length').textContent = exifData.focalLength;
            document.querySelector('.aperture').textContent = exifData.aperture;
            document.querySelector('.shutter-speed').textContent = exifData.shutterSpeed;
            document.querySelector('.iso').textContent = exifData.iso;

            focusMode.classList.add('active');
            document.body.style.overflow = 'hidden';

            focusImage.addEventListener('contextmenu', e => e.preventDefault());
            focusImage.addEventListener('dragstart', e => e.preventDefault());
        }

        function closeFocusMode() {
            const focusMode = document.querySelector('.focus-mode');
            if (!focusMode) return;

            focusMode.classList.remove('active');
            document.body.style.overflow = '';
        }

        function initializeModalControls() {
            const modal = document.querySelector('.modal');
            const modalImg = document.querySelector('.modal-content');
            const modalClose = document.querySelector('.modal-close');
            const modalPrev = document.querySelector('.modal-prev');
            const modalNext = document.querySelector('.modal-next');

            if (!modal || !modalImg || !modalClose) return;

            modalClose.addEventListener('click', closeModal);

            if (modalNext) modalNext.addEventListener('click', nextImage);
            if (modalPrev) modalPrev.addEventListener('click', prevImage);

            document.addEventListener('keydown', e => {
                if (!modal.classList.contains('active')) return;

                if (e.key === 'Escape') closeModal();
                if (e.key === 'ArrowRight') nextImage();
                if (e.key === 'ArrowLeft') prevImage();
            });

            modal.addEventListener('click', e => {
                if (e.target === modal) closeModal();
            });
        }

        function openModal(item, index) {
            const modal = document.querySelector('.modal');
            const modalImg = document.querySelector('.modal-content');

            if (!modal || !modalImg) return;

            modalImg.src = item.fullImage;
            window.currentIndex = index;
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';

            setTimeout(() => {
                protectImages();
            }, 100);
        }

        function closeModal() {
            const modal = document.querySelector('.modal');
            if (!modal) return;

            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        function nextImage() {
            window.currentIndex = (window.currentIndex + 1) % window.filteredItems.length;
            updateCurrentImage();
        }

        function prevImage() {
            window.currentIndex = (window.currentIndex - 1 + window.filteredItems.length) % window.filteredItems.length;
            updateCurrentImage();
        }

        function updateCurrentImage() {
            const modalImg = document.querySelector('.modal-content');
            const focusImage = document.querySelector('.focus-image');
            const currentItem = window.filteredItems[window.currentIndex];

            if (modalImg && document.querySelector('.modal.active')) {
                modalImg.src = currentItem.fullImage;
            }

            if (focusImage && document.querySelector('.focus-mode.active')) {
                focusImage.src = currentItem.fullImage;

                document.querySelector('.focus-title').textContent = currentItem.title;
                document.querySelector('.focus-description').textContent = currentItem.description;

                const exifData = generateExifData(currentItem);
                document.querySelector('.camera-model').textContent = exifData.camera;
                document.querySelector('.lens').textContent = exifData.lens;
                document.querySelector('.focal-length').textContent = exifData.focalLength;
                document.querySelector('.aperture').textContent = exifData.aperture;
                document.querySelector('.shutter-speed').textContent = exifData.shutterSpeed;
                document.querySelector('.iso').textContent = exifData.iso;

                document.querySelector('.context-text').textContent = generatePhotoContext(currentItem);
            }

            setTimeout(() => {
                protectImages();
            }, 100);
        }

        function generateExifData(item) {
            const cameras = {
                'nature': ['Canon EOS R5', 'Nikon Z7 II', 'Sony A7R IV'],
                'portrait': ['Canon EOS R6', 'Sony A7 IV', 'Fujifilm X-T4'],
                'urban': ['Leica Q2', 'Fujifilm X100V', 'Sony A7C'],
                'abstract': ['Canon EOS 5D Mark IV', 'Nikon D850', 'Sony A1']
            };

            const lenses = {
                'nature': ['16-35mm f/2.8', '24-70mm f/2.8', '70-200mm f/2.8'],
                'portrait': ['50mm f/1.2', '85mm f/1.4', '135mm f/1.8'],
                'urban': ['24mm f/1.4', '35mm f/1.8', '24-70mm f/2.8'],
                'abstract': ['100mm f/2.8 Macro', '50mm f/1.4', '90mm f/2.8 Tilt-Shift']
            };

            const category = item.category || 'nature';
            const cameraArray = cameras[category] || cameras.nature;
            const lensArray = lenses[category] || lenses.nature;

            const randomCamera = cameraArray[Math.floor(Math.random() * cameraArray.length)];
            const randomLens = lensArray[Math.floor(Math.random() * lensArray.length)];

            let focalLength;
            if (randomLens.includes('-')) {
                const range = randomLens.split(' ')[0].split('-');
                const min = parseInt(range[0]);
                const max = parseInt(range[1]);
                focalLength = Math.floor(Math.random() * (max - min + 1) + min) + 'mm';
            } else {
                focalLength = randomLens.split(' ')[0];
            }

            const apertures = ['f/1.4', 'f/1.8', 'f/2', 'f/2.8', 'f/4', 'f/5.6', 'f/8', 'f/11'];
            const shutterSpeeds = ['1/8000', '1/4000', '1/2000', '1/1000', '1/500', '1/250', '1/125', '1/60', '1/30', '1/15', '1/8', '1/4', '1/2', '1"', '2"'];
            const isoValues = ['100', '200', '400', '800', '1600', '3200', '6400'];

            const aperture = apertures[Math.floor(Math.random() * apertures.length)];
            const shutterSpeed = shutterSpeeds[Math.floor(Math.random() * shutterSpeeds.length)];
            const iso = isoValues[Math.floor(Math.random() * isoValues.length)];

            return {
                camera: randomCamera,
                lens: randomLens,
                focalLength: focalLength,
                aperture: aperture,
                shutterSpeed: shutterSpeed,
                iso: iso
            };
        }

        function generatePhotoContext(item) {
            const contexts = {
                'nature': [
                    "Capturée lors d'une expédition dans les montagnes, cette photo a nécessité 3 heures de randonnée avant le lever du soleil.",
                    "Cet instant fugace a été saisi après plusieurs jours d'attente dans des conditions météorologiques difficiles.",
                    "Cette scène naturelle a été photographiée à l'aube, avec une lumière particulièrement rare à cette période de l'année."
                ],
                'portrait': [
                    "Ce portrait fait partie d'une série explorant les émotions humaines authentiques, sans pose ni artifice.",
                    "Cette personne a été photographiée dans son environnement quotidien, capturant un moment de vérité dans sa vie.",
                    "Cette image est le résultat d'une longue conversation et d'une relation de confiance établie avec le sujet."
                ],
                'urban': [
                    "Cette scène urbaine a été capturée depuis un point de vue rarement accessible, à un moment précis de la journée.",
                    "Pour cette photo, j'ai attendu que la lumière et les mouvements de la ville s'alignent parfaitement.",
                    "Cette perspective unique de l'environnement urbain révèle des détails généralement ignorés dans notre quotidien."
                ],
                'abstract': [
                    "Cette composition abstraite joue avec les perceptions et invite à reconsidérer notre vision de la réalité.",
                    "Cette étude de formes et de lumières est née d'une exploration des limites techniques de la photographie.",
                    "Cette image fait partie d'une série expérimentale sur la transformation visuelle d'objets ordinaires."
                ]
            };

            const category = item.category || 'nature';
            const categoryContexts = contexts[category] || contexts.nature;
            return categoryContexts[Math.floor(Math.random() * categoryContexts.length)];
        }

        function generateInspirations(category) {
            return [
                'images/background.jpg',
                'images/background.jpg',
                'images/background.jpg'
            ];
        }

        function protectImages() {
            document.addEventListener('contextmenu', function (e) {
                e.preventDefault();
                return false;
            });

            document.addEventListener('dragstart', function (e) {
                if (e.target.tagName === 'IMG') {
                    e.preventDefault();
                    return false;
                }
            });

            document.addEventListener('keydown', function (e) {
                const forbiddenKeys = ['c', 's', 'u', 'p', 'F12', 'PrintScreen'];
                if ((e.ctrlKey || e.metaKey) && forbiddenKeys.includes(e.key.toLowerCase())) {
                    e.preventDefault();
                    return false;
                }
            });

            document.querySelectorAll('img').forEach(img => {
                if (img.parentNode.classList.contains('protected-image-container')) {
                    return;
                }

                const container = document.createElement('div');
                container.className = 'protected-image-container';
                container.style.position = 'relative';
                container.style.display = 'inline-block';

                img.parentNode.insertBefore(container, img);
                container.appendChild(img);

                const protector = document.createElement('div');
                protector.className = 'image-protector';
                protector.style.position = 'absolute';
                protector.style.top = '0';
                protector.style.left = '0';
                protector.style.width = '100%';
                protector.style.height = '100%';
                protector.style.zIndex = '10';
                container.appendChild(protector);
            });
        }

        function initializeCustomCursor() {
            const cursor = document.querySelector('.cursor');
            const cursorFollower = document.querySelector('.cursor-follower');

            if (!cursor || !cursorFollower) return;

            document.addEventListener('mousemove', e => {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';

                setTimeout(() => {
                    cursorFollower.style.left = e.clientX + 'px';
                    cursorFollower.style.top = e.clientY + 'px';
                }, 100);
            });

            document.addEventListener('mousedown', () => {
                cursor.style.transform = 'translate(-50%, -50%) scale(0.8)';
                cursorFollower.style.transform = 'translate(-50%, -50%) scale(0.5)';
            });

            document.addEventListener('mouseup', () => {
                cursor.style.transform = 'translate(-50%, -50%) scale(1)';
                cursorFollower.style.transform = 'translate(-50%, -50%) scale(1)';
            });

            document.addEventListener('mouseleave', () => {
                cursor.classList.add('cursor-hidden');
                cursorFollower.classList.add('cursor-hidden');
            });

            document.addEventListener('mouseenter', () => {
                cursor.classList.remove('cursor-hidden');
                cursorFollower.classList.remove('cursor-hidden');
            });

            const clickables = document.querySelectorAll('a, button, .gallery-item');
            clickables.forEach(el => {
                el.addEventListener('mouseenter', () => {
                    cursor.classList.add('hover-effect');
                });

                el.addEventListener('mouseleave', () => {
                    cursor.classList.remove('hover-effect');
                });
            });
        }

        function initializeParallaxEffect() {
            const parallaxBg = document.querySelector('.parallax-bg');

            if (!parallaxBg) return;

            document.addEventListener('mousemove', e => {
                const moveX = (e.clientX / window.innerWidth) * 20;
                const moveY = (e.clientY / window.innerHeight) * 20;
                parallaxBg.style.transform = `translate(${-moveX}px, ${-moveY}px)`;
            });
        }

        function initializeNavigation() {
            const hamburger = document.querySelector('.hamburger');
            const menu = document.querySelector('.menu');

            if (hamburger && menu) {
                hamburger.addEventListener('click', () => {
                    menu.classList.toggle('active');
                    hamburger.innerHTML = menu.classList.contains('active')
                        ? '<i class="fas fa-times"></i>'
                        : '<i class="fas fa-bars"></i>';
                });
            }

            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();

                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);

                    if (targetElement) {
                        if (menu && menu.classList.contains('active')) {
                            menu.classList.remove('active');
                            if (hamburger) {
                                hamburger.innerHTML = '<i class="fas fa-bars"></i>';
                            }
                        }

                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        }

        function initializeMapFeature() {
            const mapContainer = document.getElementById('photo-map');

            if (!mapContainer) {
                console.error('Conteneur de carte non trouvé');
                return;
            }

            try {
                const map = L.map('photo-map').setView([46.603354, 1.888334], 5);

                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map);

                const allMarkers = L.layerGroup().addTo(map);
                const natureMarkers = L.layerGroup();
                const urbanMarkers = L.layerGroup();

                window.galleryItems.forEach(item => {
                    if (item.geoLocation && Array.isArray(item.geoLocation) && item.geoLocation.length === 2) {
                        const marker = L.marker(item.geoLocation)
                            .bindPopup(`
                                <div class="popup-content">
                                    <img src="${item.imageUrl}" alt="${item.title}" style="width: 100%; max-height: 150px; object-fit: cover;">
                                    <h4>${item.title}</h4>
                                    <p>${item.description}</p>
                                </div>
                            `);

                        allMarkers.addLayer(marker);
                        
                        if (item.category === 'nature') {
                            natureMarkers.addLayer(marker);
                        } else if (item.category === 'urban') {
                            urbanMarkers.addLayer(marker);
                        }
                        
                        console.log(`Marqueur ajouté pour ${item.title} à ${item.geoLocation}`);
                    }
                });

                document.querySelectorAll('.map-btn').forEach(button => {
                    button.addEventListener('click', function() {
                        const filter = this.getAttribute('data-filter');

                        map.removeLayer(allMarkers);
                        map.removeLayer(natureMarkers);
                        map.removeLayer(urbanMarkers);

                        if (filter === 'all') {
                            map.addLayer(allMarkers);
                        } else if (filter === 'nature') {
                            map.addLayer(natureMarkers);
                        } else if (filter === 'urban') {
                            map.addLayer(urbanMarkers);
                        }
                        
                        document.querySelectorAll('.map-btn').forEach(btn => {
                            btn.classList.remove('active');
                        });
                        this.classList.add('active');
                    });
                });
                
                document.querySelector('.map-btn[data-filter="all"]').classList.add('active');
                
                console.log('Carte initialisée avec succès');

            } catch (error) {
                console.error('Erreur lors de l\'initialisation de la carte:', error);
            }
        }

        document.addEventListener('DOMContentLoaded', initializeMapFeature);

        function initializeTimelineAnimation() {
            const timeline = document.querySelector('.timeline');

            if (!timeline) return;
            const timelineItems = document.querySelectorAll('.timeline-item');

            window.addEventListener('scroll', () => {
                timelineItems.forEach((item, index) => {
                    const itemTop = item.getBoundingClientRect().top;

                    if (itemTop < window.innerHeight * 0.8) {
                        setTimeout(() => {
                            item.classList.add('active');
                        }, 300 * index);
                    }
                });
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            function isElementInViewport(el) {
                const rect = el.getBoundingClientRect();
                return (
                    rect.top <= (window.innerHeight || document.documentElement.clientHeight) * 0.8 &&
                    rect.bottom >= 0
                );
            }

            function checkTimelineElements() {
                const timelineItems = document.querySelectorAll('.timeline-item');
                
                timelineItems.forEach(item => {
                    if (isElementInViewport(item)) {
                        item.classList.add('active');
                    }
                });
            }

            checkTimelineElements();
            window.addEventListener('scroll', checkTimelineElements);
            window.addEventListener('resize', checkTimelineElements);
        });
    </script>
</body>

</html>