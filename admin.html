<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - France New Life S-WL</title>
  <link rel="shortcut icon" href="img/newlife.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #b00000;
      --primary-dark: #800000;
      --secondary-color: #ffffff;
      --dark-bg: #000000;
      --light-bg: rgba(8, 8, 8, 0.9);
      --text-light: #ffffff;
      --text-dark: #ffffff;
      --border-color: #ffffff;
      --border-radius: 12px;
      --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      --transition: all 0.3s ease;
      --bleu: #0055A4;
      --blanc: #F5F5F5;
      --rouge: #b00000;
      --noir: #1E1E1E;
      --gris: #333333;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
      transition: var(--transition);
    }

    body {
      background-color: var(--dark-bg);
      color: var(--text-dark);
      line-height: 1.6;
      overflow-x: hidden;
    }

    .container {
      width: 100%;
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 15px;
    }

    header {
      background-color: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      padding: 1rem;
      position: relative;
      top: 10px;
      left: 0;
      right: 0;
      margin: 0 auto;
      z-index: 100;
      box-shadow: var(--box-shadow);
      width: 90%;
      max-width: 1100px;
      border-radius: 0;
    }

    @media (min-width: 768px) {
      header {
        padding: 1rem 2rem;
        width: 90%;
        border-radius: 10px;
      }
    }

    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 800;
      color: var(--text-light);
      text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
    }

    @media (min-width: 576px) {
      .logo {
        font-size: 2rem;
      }
    }

    .logo span {
      color: var(--bleu);
    }

    .logo span2 {
      color: var(--rouge);
    }

    .nav-links {
      display: none;
      flex-direction: column;
      width: 100%;
      margin-top: 1rem;
      gap: 1rem;
    }

    .nav-links.active {
      display: flex;
    }

    @media (min-width: 768px) {
      .nav-links {
        display: flex;
        flex-direction: row;
        width: auto;
        margin-top: 0;
        gap: 2rem;
      }
    }

    .nav-links a {
      color: var(--text-light);
      text-decoration: none;
      font-weight: 600;
      position: relative;
      padding: 0.5rem;
    }

    .nav-links a::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: -4px;
      width: 0;
      height: 2px;
      background: linear-gradient(45deg, var(--bleu), var(--blanc), var(--rouge));
      transition: var(--transition);
    }

    .nav-links a:hover::after {
      width: 100%;
    }

    .menu-toggle {
      display: block;
      background: none;
      border: none;
      color: var(--text-light);
      font-size: 1.5rem;
      cursor: pointer;
    }

    @media (min-width: 768px) {
      .menu-toggle {
        display: none;
      }
    }

    .login-container {
      max-width: 500px;
      margin: 100px auto;
      padding: 2rem;
      background-color: var(--light-bg);
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      text-align: center;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { 
        opacity: 0; 
        transform: translateY(-20px); 
      }
      to { 
        opacity: 1; 
        transform: translateY(0); 
      }
    }

    .login-container h2 {
      margin-bottom: 2rem;
      color: var(--text-light);
      font-size: 1.8rem;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    .login-container h2 span {
      color: var(--bleu);
      transition: var(--transition);
    }

    .login-container h2 span2 {
      color: var(--rouge);
      transition: var(--transition);
    }

    .login-container .form-group {
      margin-bottom: 1.5rem;
      text-align: left;
    }

    .login-container .form-group label {
      display: block;
      margin-bottom: 0.7rem;
      color: var(--text-light);
      font-weight: 500;
    }

    .login-container .form-group input {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      background-color: rgba(255, 255, 255, 0.07);
      color: var(--text-light);
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    .login-container .form-group input:focus {
      outline: none;
      box-shadow: 0 0 0 2px rgba(176, 0, 0, 0.3), 0 0 0 4px rgba(0, 85, 164, 0.3);
      border-color: rgba(255, 255, 255, 0.5);
      background-color: rgba(255, 255, 255, 0.1);
    }

    .section-title {
      font-size: 1.6rem;
      margin-bottom: 1.5rem;
      color: var(--text-light);
      position: relative;
      padding-bottom: 0.5rem;
    }
    
    .section-title::after {
      content: "";
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 60px;
      height: 2px;
      background: linear-gradient(45deg, var(--bleu), var(--blanc), var(--rouge));
    }
    
    .announcement-form {
      background-color: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .form-group {
      margin-bottom: 1.2rem;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: var(--text-light);
      font-weight: 500;
      font-size: 1rem;
    }
    
    .enhanced-input, .enhanced-textarea {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      background-color: rgba(255, 255, 255, 0.07);
      color: var(--text-light);
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    
    .enhanced-input:focus, .enhanced-textarea:focus {
      outline: none;
      box-shadow: 0 0 0 2px rgba(176, 0, 0, 0.3), 0 0 0 4px rgba(0, 85, 164, 0.3);
      border-color: rgba(255, 255, 255, 0.5);
      background-color: rgba(255, 255, 255, 0.1);
    }
    
    .enhanced-textarea {
      min-height: 120px;
      resize: vertical;
      line-height: 1.5;
    }
    
    .save-btn {
      background: linear-gradient(45deg, var(--bleu), var(--blanc), var(--rouge));
      color: var(--dark-bg);
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 1rem;
      margin-top: 0.5rem;
    }
    
    .save-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
    }
    
    .pulse-animation:hover {
      animation: pulse 1.5s infinite;
    }

    .login-btn {
      background: linear-gradient(45deg, var(--bleu), var(--blanc), var(--rouge));
      color: var(--dark-bg);
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
      margin-top: 1rem;
      width: 100%;
    }

    .login-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
    }

    .error-message {
      color: var(--rouge);
      margin-top: 1rem;
      font-size: 0.9rem;
      display: none;
    }

    /* Admin Dashboard Styles */
    .admin-dashboard {
      display: none;
      padding: 2rem 0;
      animation: fadeIn 0.5s ease;
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      padding: 0 1rem;
    }

    .dashboard-title {
      font-size: 1.8rem;
      color: var(--text-light);
    }

    .dashboard-title span {
      color: var(--bleu);
    }

    .dashboard-title span2 {
      color: var(--rouge);
    }

    .logout-btn {
      background: linear-gradient(45deg, var(--rouge), var(--blanc), var(--bleu));
      color: var(--dark-bg);
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .logout-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .admin-tabs {
      display: flex;
      background-color: var(--light-bg);
      border-radius: var(--border-radius);
      overflow: hidden;
      margin-bottom: 2rem;
    }

    .tab-btn {
      flex: 1;
      padding: 1rem;
      background: none;
      border: none;
      color: var(--text-light);
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s;
      border-bottom: 3px solid transparent;
    }

    .tab-btn:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    .tab-btn.active {
      background-color: rgba(255, 255, 255, 0.15);
      border-bottom: 3px solid var(--primary-color);
    }

    .admin-tab-content {
      border-radius: var(--border-radius);
    }

    .tab-pane {
      display: none;
      background-color: none;
    }

    .tab-pane.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    .announcement-form {
      margin-bottom: 2rem;
    }

    .announcement-list {
      margin-top: 2rem;
    }

    .announcement-item {
      background-color: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
      position: relative;
    }

    .announcement-title {
      font-weight: bold;
      margin-bottom: 0.5rem;
      color: var(--text-light);
    }

    .announcement-text {
      color: var(--text-light);
      opacity: 0.8;
      margin-bottom: 0.5rem;
    }

    .announcement-date {
      font-size: 0.8rem;
      color: var(--text-light);
      opacity: 0.6;
    }

    .delete-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: none;
      border: none;
      color: var(--rouge);
      cursor: pointer;
      font-size: 1.2rem;
    }

    .delete-btn:hover {
      color: #ff0000;
    }

    .section-title {
      font-size: 1.6rem;
      margin-bottom: 1.5rem;
      color: var(--text-light);
      position: relative;
      padding-bottom: 0.5rem;
    }

    .section-title::after {
      content: "";
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 60px;
      height: 2px;
      background: linear-gradient(45deg, var(--bleu), var(--blanc), var(--rouge));
    }

    .content-editor-panel {
      background-color: rgba(0, 0, 0, 0.05);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(0, 0, 0, 0.1);
      margin-bottom: 2rem;
    }

    /* Sélecteur de fichier */
    .file-selector {
      margin-bottom: 1.5rem;
    }

    .file-selector label {
      display: block;
      margin-bottom: 0.5rem;
      color: #d9e1ff;
      font-size: 0.95rem;
    }

    .select-wrapper {
      position: relative;
    }

    .enhanced-select {
      width: 100%;
      padding: 10px 14px;
      background-color: var(--dark-bg);
      color: #e2e8fa;
      border: 1px solid rgba(0, 0, 0, 0.15);
      border-radius: 8px;
      font-size: 0.95rem;
      appearance: none;
      cursor: pointer;
    }

    .select-wrapper::after {
      content: "\f107";
      font-family: "Font Awesome 5 Free";
      font-weight: 900;
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #d9e1ff;
      pointer-events: none;
    }

    /* Éditeur de contenu */
    .editor-container {
      margin-bottom: 2rem;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      border: 1px solid rgba(0, 0, 0, 0.15);
      background-color: var(--dark-bg);
    }

    .editor-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px;
      background-color: var(--dark-bg);
      border-bottom: 1px solid rgba(0, 0, 0, 0.12);
    }

    .file-path {
      color: #d9e1ff;
      font-size: 0.9rem;
      font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
      letter-spacing: 0.02em;
    }

    .editor-controls {
      display: flex;
      gap: 12px;
    }

    .control-btn {
      background: none;
      border: none;
      color: #d9e1ff;
      opacity: 0.8;
      cursor: pointer;
      font-size: 0.9rem;
      padding: 6px 8px;
      border-radius: 6px;
      transition: all 0.2s ease;
    }

    .control-btn:hover {
      opacity: 1;
      background-color: rgba(0, 0, 0, 0.15);
      transform: translateY(-1px);
    }

    .editor-body {
      position: relative;
    }

    .editor-body textarea {
      width: 100%;
      height: 400px;
      padding: 18px;
      border: none;
      background-color: var(--dark-bg);
      color: #e2e8fa;
      font-size: 1rem;
      font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
      line-height: 1.7;
      resize: vertical;
      transition: all 0.3s ease;
    }

    .editor-body textarea:focus {
      outline: none;
      background-color: var(--dark-bg);
      box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.2);
    }

    .editor-container.fullscreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 9999;
      margin: 0;
      border-radius: 0;
      background-color: var(--dark-bg);
      display: flex;
      flex-direction: column;
    }

    body.editor-fullscreen {
      overflow: hidden;
    }

    .editor-container.fullscreen .editor-header {
      padding: 15px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    .editor-container.fullscreen .editor-body {
      flex: 1;
      overflow: hidden;
    }

    .editor-container.fullscreen .editor-body textarea {
      height: 100%;
      font-size: 16px;
      padding: 20px;
      overflow: auto;
    }

    /* Styles pour le panneau de recherche */
    .search-panel {
      background-color: rgba(0, 0, 0, 0.3);
      border-radius: 8px 8px 0 0;
      padding: 10px;
      margin-bottom: 5px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      animation: fadeIn 0.2s ease;
    }

    .search-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    .search-input-group {
      display: flex;
      align-items: center;
      flex: 1;
      max-width: 45%;
    }

    .search-input-group input {
      flex: 1;
      background-color: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: 6px 10px;
      border-radius: 4px;
      color: var(--text-light);
      font-size: 14px;
      margin-right: 5px;
    }

    .search-input-group input:focus {
      outline: none;
      border-color: rgba(255, 255, 255, 0.4);
      background-color: rgba(255, 255, 255, 0.15);
    }

    .search-input-group button, #closeSearchBtn {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: var(--text-light);
      border-radius: 4px;
      padding: 6px 8px;
      cursor: pointer;
      font-size: 12px;
      margin-left: 2px;
      transition: all 0.2s ease;
    }

    .search-input-group button:hover, #closeSearchBtn:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .search-info {
      font-size: 12px;
      color: #4cd137;
      opacity: 0.7;
      margin-top: 8px;
      text-align: right;
    }

    .search-highlight-effect {
      position: absolute;
      background-color: rgba(255, 230, 0, 0.3);
      border-radius: 2px;
      pointer-events: none;
      z-index: 10;
      transition: all 0.4s ease;
      box-shadow: 0 0 0 2px rgba(255, 230, 0, 0.5);
    }

    .search-info.has-results {
      color: #4cd137;
    }

    /* Amélioration de l'éditeur */
    .editor-body textarea {
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      line-height: 1.5;
      tab-size: 2;
    }

    /* Boutons d'action */
    .action-buttons {
      display: flex;
      gap: 15px;
      margin-bottom: 1rem;
    }

    .secondary-btn {
      background: linear-gradient(45deg, var(--bleu), var(--blanc), var(--rouge));
      color: var(--dark-bg);
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 1rem;
      margin-top: 0.5rem;
      max-width: 290px;
    }
    
    .secondary-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
    }

    .import-btn {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-light);
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      flex: 1;
      min-width: 200px;
      max-width: 290px;
      margin-top: 10px;
      justify-content: center;
    }

    .import-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .import-btn i, .export-btn i {
      font-size: 1.0rem;
    }

    .success-message {
      color: #4cd137;
      margin-top: 1rem;
      display: none;
      padding: 10px 15px;
      background-color: rgba(76, 209, 55, 0.1);
      border-radius: 6px;
      font-weight: 500;
      animation: fadeIn 0.5s ease;
    }

    .light-mode {
      --dark-bg: #e4e4e4;
      --light-bg: #ffffff;
      --text-light: #000000;
      --text-dark: #000000;
      --border-color: #000000;
      background-color: var(--dark-bg);
      color: var(--text-dark);
    }

    .theme-toggle {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      z-index: 1001;
      background: linear-gradient(45deg, var(--bleu), var(--blanc), var(--rouge));
      color: black;
      border: none;
      padding: 0.5rem;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: var(--box-shadow);
      font-size: 0.9rem;
    }

    /* Footer */
    footer {
      background: var(--dark-bg);
      color: var(--text-light);
      padding: 1.5rem 15px;
      text-align: center;
      margin-top: 2rem;
    }

    .copyright {
      font-size: 0.9rem;
      opacity: 0.6;
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <nav>
        <div class="logo"><span>Admin</span> NewLife <span2>S-WL</span2></div>
        <button class="menu-toggle" id="menuToggle">
          <i class="fas fa-bars"></i>
        </button>
        <div class="nav-links" id="navLinks">
          <a href="index.html">🏚️ Retour au site</a>
        </div>
      </nav>
    </div>
  </header>

  <button class="theme-toggle" onclick="toggleTheme()">🌓 Thème</button>

  <div class="container">
    <div class="login-container" id="loginContainer">
      <h2><span>Admin</span> NewLife <span2>S-WL</span2></h2>
      <form id="loginForm">
        <div class="form-group">
          <label for="username">Nom d'utilisateur</label>
          <input type="text" id="username" required>
        </div>
        <div class="form-group">
          <label for="password">Mot de passe</label>
          <input type="password" id="password" required>
        </div>
        <button type="submit" class="login-btn">Se connecter</button>
        <p class="error-message" id="loginError">Nom d'utilisateur ou mot de passe incorrect.</p>
      </form>
    </div>

    <div class="admin-dashboard" id="adminDashboard">
      <div class="dashboard-header">
        <h2 class="dashboard-title"><span>Admin</span> NewLife <span2>S-WL</span2></h2>
        <button class="logout-btn" id="logoutBtn">Déconnexion</button>
      </div>

      <div class="admin-tabs">
        <button class="tab-btn active" data-tab="announcements">📢 Annonces</button>
        <button class="tab-btn" data-tab="content">📝 Contenu du site</button>
        <button class="tab-btn" data-tab="settings">⚙️ Paramètres</button>
      </div>

        <div class="admin-tab-content">
          <div class="tab-pane active" id="announcements">
            <div class="announcement-form">
              <h3 class="section-title">Gestion des annonces</h3>
              <div class="form-group">
                <label for="announcementTitle">Titre de l'annonce</label>
                <input type="text" id="announcementTitle" placeholder="Entrez le titre de l'annonce" class="enhanced-input">
              </div>
              <div class="form-group">
                <label for="announcementText">Contenu de l'annonce</label>
                <textarea id="announcementText" rows="5" placeholder="Entrez le contenu de l'annonce" class="enhanced-textarea"></textarea>
              </div>
              <button class="save-btn pulse-animation" id="saveAnnouncement">
                <i class="fas fa-paper-plane"></i> Publier l'annonce
              </button>
              <p class="success-message" id="announcementSuccess">
                <i class="fas fa-check-circle"></i> Annonce publiée avec succès!
              </p>
              <div class="announcement-list" id="announcementList">
                <h4 class="list-title">Annonces actuelles</h4>
              </div>
            </div>
          </div>
        </div>
        
        <div class="tab-pane" id="content">
          <div class="content-editor-panel">
            <h3 class="section-title">Édition du contenu du site</h3>
            <div class="file-selector">
              <label for="fileSelect">Sélectionnez un fichier à éditer</label>
              <div class="select-wrapper">
                <select id="fileSelect" class="enhanced-select">
                  <option value="">-- Sélectionnez un fichier --</option>
                  <option value="index.html">Page d'accueil (index.html)</option>
                  <option value="reglement.html">Règlement (reglement.html)</option>
                  <option value="boutique.html">Boutique (boutique.html)</option>
                  <option value="announcements.json">announcements (announcements.json)</option>
                </select>
              </div>
            </div>
        
            <div class="editor-container">
              <div class="editor-header">
                <span class="file-path" id="currentFilePath">Aucun fichier sélectionné</span>
                <div class="editor-controls">
                  <button class="control-btn" title="Plein écran"><i class="fas fa-expand-alt"></i></button>
                  <button class="control-btn" title="Outil de recherche"><i class="fas fa-search"></i></button>
                </div>
              </div>
              <div class="editor-body">
                <textarea id="fileEditor" placeholder="Le contenu du fichier apparaîtra ici"></textarea>
              </div>
            </div>
        
            <div class="action-buttons">
              <button class="save-btn" id="saveFileBtn">
                <i class="fas fa-save"></i> Enregistrer les modifications
              </button>
              <button class="secondary-btn" id="resetFileBtn">
                <i class="fas fa-undo"></i> Réinitialiser
              </button>
            </div>
            
            <p class="success-message" id="fileSuccess">
              <i class="fas fa-check-circle"></i> Modifications enregistrées avec succès!
            </p>
          </div>
        </div>

        <div class="tab-pane" id="settings">
          <div class="content-editor-panel">
            <h3 class="section-title">Paramètres du site</h3>
            <div class="form-group">
              <label for="adminUsername">Changer le nom d'utilisateur administrateur</label>
              <input type="text" id="adminUsername" placeholder="Nouveau nom d'utilisateur" class="enhanced-input">
            </div>
            <div class="form-group">
              <label for="adminPassword">Changer le mot de passe administrateur</label>
              <input type="password" id="adminPassword" placeholder="Nouveau mot de passe" class="enhanced-input">
            </div>
            <div class="form-group">
              <label for="confirmPassword">Confirmer le nouveau mot de passe</label>
              <input type="password" id="confirmPassword" placeholder="Confirmez le nouveau mot de passe" class="enhanced-input">
            </div>
            <button class="save-btn pulse-animation" id="saveSettingsBtn">
              <i class="fas fa-save"></i> Enregistrer les paramètres
            </button>
            <p class="success-message" id="settingsSuccess">
              <i class="fas fa-check-circle"></i> Paramètres mis à jour avec succès!
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <div class="container">
      <div class="copyright">
        &copy; 2025 ADMIN PANEL - FRANCE NEWLIFE S-WL
      </div>
    </div>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Initialisation du thème
      function toggleTheme() {
        document.body.classList.toggle('light-mode');
        const isLightMode = document.body.classList.contains('light-mode');
        localStorage.setItem('theme', isLightMode ? 'light' : 'dark');
      }
      
      window.toggleTheme = toggleTheme;
      
      // Appliquer le thème sauvegardé
      const theme = localStorage.getItem('theme');
      if (theme === 'light') document.body.classList.add('light-mode');

      // Menu mobile toggle
      const menuToggle = document.getElementById('menuToggle');
      const navLinks = document.getElementById('navLinks');
      
      if (menuToggle && navLinks) {
        menuToggle.addEventListener('click', () => {
          navLinks.classList.toggle('active');
          menuToggle.innerHTML = navLinks.classList.contains('active') ? 
            '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
        });
      }

      // Initialiser les identifiants par défaut s'ils n'existent pas
      if (!localStorage.getItem('adminCredentials')) {
        const defaultCredentials = {
          username: 'admin',
          password: CryptoJS.SHA256('admin123').toString()
        };
        localStorage.setItem('adminCredentials', JSON.stringify(defaultCredentials));
      }

      // Éléments du DOM pour la connexion et tableau de bord
      const loginForm = document.getElementById('loginForm');
      const loginContainer = document.getElementById('loginContainer');
      const adminDashboard = document.getElementById('adminDashboard');
      const loginError = document.getElementById('loginError');
      const logoutBtn = document.getElementById('logoutBtn');

      // Vérifier si l'utilisateur est déjà connecté
      const isLoggedIn = sessionStorage.getItem('isAdminLoggedIn') === 'true';
      if (isLoggedIn) {
        loginContainer.style.display = 'none';
        adminDashboard.style.display = 'block';
        loadAnnouncements();
      }

      // Gestion de la connexion
      loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        const storedCredentials = JSON.parse(localStorage.getItem('adminCredentials'));

        if (username === storedCredentials.username && 
            CryptoJS.SHA256(password).toString() === storedCredentials.password) {
          loginContainer.style.display = 'none';
          adminDashboard.style.display = 'block';
          sessionStorage.setItem('isAdminLoggedIn', 'true');
          loadAnnouncements();
        } else {
          loginError.style.display = 'block';
          setTimeout(() => {
            loginError.style.display = 'none';
          }, 3000);
        }
      });

      // Déconnexion
      logoutBtn.addEventListener('click', () => {
        sessionStorage.removeItem('isAdminLoggedIn');
        loginContainer.style.display = 'block';
        adminDashboard.style.display = 'none';
      });

      // Gestion des onglets
      const tabButtons = document.querySelectorAll('.tab-btn');
      const tabPanes = document.querySelectorAll('.tab-pane');

      tabButtons.forEach(button => {
        button.addEventListener('click', function() {
          tabButtons.forEach(btn => btn.classList.remove('active'));
          tabPanes.forEach(pane => pane.classList.remove('active'));

          this.classList.add('active');
          const tabId = this.getAttribute('data-tab');
          document.getElementById(tabId).classList.add('active');

          if (tabId === 'content') {
            document.getElementById('fileSelect').selectedIndex = 0;
            document.getElementById('fileEditor').value = '';
            document.getElementById('currentFilePath').textContent = 'Aucun fichier sélectionné';
          }
        });
      });

      // Gestion des annonces
      const saveAnnouncementBtn = document.getElementById('saveAnnouncement');
      const announcementTitle = document.getElementById('announcementTitle');
      const announcementText = document.getElementById('announcementText');
      const announcementSuccess = document.getElementById('announcementSuccess');
      
      saveAnnouncementBtn.addEventListener('click', () => {
        if (announcementTitle.value.trim() === '' || announcementText.value.trim() === '') {
          alert('Veuillez remplir tous les champs de l\'annonce.');
          return;
        }

        const newAnnouncement = {
          id: Date.now(),
          title: announcementTitle.value,
          text: announcementText.value,
          date: new Date().toLocaleDateString('fr-FR')
        };

        let announcements = JSON.parse(localStorage.getItem('siteAnnouncements') || '[]');
        announcements.unshift(newAnnouncement);
        localStorage.setItem('siteAnnouncements', JSON.stringify(announcements));

        announcementTitle.value = '';
        announcementText.value = '';
        announcementSuccess.style.display = 'block';
        setTimeout(() => {
          announcementSuccess.style.display = 'none';
        }, 3000);
        
        loadAnnouncements();
        
        // Générer un fichier JSON avec les annonces pour téléchargement
        generateAnnouncementsJson();
      });

      // Fonction pour charger les annonces
      function loadAnnouncements() {
        const announcementList = document.getElementById('announcementList');
        const announcements = JSON.parse(localStorage.getItem('siteAnnouncements') || '[]');
        
        let html = '<h4>Annonces actuelles</h4>';
        
        if (announcements.length === 0) {
          html += '<p>Aucune annonce pour le moment.</p>';
        } else {
          announcements.forEach(announcement => {
            html += `
              <div class="announcement-item" data-id="${announcement.id}">
                <h4 class="announcement-title">${announcement.title}</h4>
                <p class="announcement-text">${announcement.text}</p>
                <p class="announcement-date">Publié le ${announcement.date}</p>
                <button class="delete-btn" onclick="deleteAnnouncement(${announcement.id})">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            `;
          });
        }
        
        announcementList.innerHTML = html;
      }

      // Fonction pour supprimer une annonce
      window.deleteAnnouncement = function(id) {
        if (confirm('Êtes-vous sûr de vouloir supprimer cette annonce ?')) {
          let announcements = JSON.parse(localStorage.getItem('siteAnnouncements') || '[]');
          announcements = announcements.filter(item => item.id !== id);
          localStorage.setItem('siteAnnouncements', JSON.stringify(announcements));
          loadAnnouncements();
          
          // Mettre à jour le fichier JSON des annonces
          generateAnnouncementsJson();
        }
      };

      // Gestion de l'édition de fichiers
      const fileSelect = document.getElementById('fileSelect');
      const fileEditor = document.getElementById('fileEditor');
      const saveFileBtn = document.getElementById('saveFileBtn');
      const resetFileBtn = document.getElementById('resetFileBtn');
      const fileSuccess = document.getElementById('fileSuccess');
      const currentFilePath = document.getElementById('currentFilePath');

      // Charger le contenu du fichier sélectionné
      fileSelect.addEventListener('change', () => {
        const selectedFile = fileSelect.value;
        if (!selectedFile) {
          fileEditor.value = '';
          currentFilePath.textContent = 'Aucun fichier sélectionné';
          currentFilePath.style.opacity = '0.7';
          return;
        }

        currentFilePath.textContent = selectedFile;
        currentFilePath.style.opacity = '1';

        const storedContent = localStorage.getItem(`file_${selectedFile}`);
        if (storedContent) {
          fileEditor.value = storedContent;
        } else {
          // Essayer de charger le contenu depuis un fichier statique
          fetch(selectedFile)
            .then(response => {
              if (response.ok) return response.text();
              throw new Error('Fichier non trouvé');
            })
            .then(content => {
              fileEditor.value = content;
              localStorage.setItem(`file_${selectedFile}`, content);
            })
            .catch(error => {
              console.error('Erreur de chargement:', error);
              fileEditor.value = `<!-- Contenu de ${selectedFile} -->\n<!-- Éditez ce contenu et cliquez sur Enregistrer pour le sauvegarder -->\n\n<!-- Ce contenu sera disponible pour téléchargement -->`;
            });
        }
      });

      const fullscreenBtn = document.querySelector('.editor-controls .control-btn[title="Plein écran"]');
      const searchBtn = document.querySelector('.editor-controls .control-btn[title="Outil de recherche"]');
      const editorContainer = document.querySelector('.editor-container');
      const editorBody = document.querySelector('.editor-body');
      
      // Gestion du mode plein écran
      let isFullscreen = false;
      fullscreenBtn.addEventListener('click', function() {
        isFullscreen = !isFullscreen;
        
        if (isFullscreen) {
          editorContainer.classList.add('fullscreen');
          document.body.classList.add('editor-fullscreen');
          this.innerHTML = '<i class="fas fa-compress-alt"></i>';
          this.setAttribute('title', 'Quitter le plein écran');
        } else {
          editorContainer.classList.remove('fullscreen');
          document.body.classList.remove('editor-fullscreen');
          this.innerHTML = '<i class="fas fa-expand-alt"></i>';
          this.setAttribute('title', 'Plein écran');
        }
        
        // Focus sur l'éditeur
        fileEditor.focus();
      });
      
      // Sortir du mode plein écran avec Escape
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && isFullscreen) {
          fullscreenBtn.click();
        }
      });
      
      // Fonction de recherche
      searchBtn.addEventListener('click', function() {
        if (!fileEditor.value) {
          alert('Aucun contenu à rechercher. Veuillez d\'abord sélectionner un fichier.');
          return;
        }
        
        // Vérifier si le panneau de recherche existe déjà
        let searchPanel = document.querySelector('.search-panel');
        
        if (!searchPanel) {
          // Créer le panneau de recherche
          searchPanel = document.createElement('div');
          searchPanel.className = 'search-panel';
          searchPanel.innerHTML = `
            <div class="search-header">
              <div class="search-input-group">
                <input type="text" id="searchInput" placeholder="Rechercher...">
                <button id="searchPrev" title="Précédent"><i class="fas fa-chevron-up"></i></button>
                <button id="searchNext" title="Suivant"><i class="fas fa-chevron-down"></i></button>
              </div>
              <div class="search-input-group">
                <input type="text" id="replaceInput" placeholder="Remplacer par...">
                <button id="replaceBtn" title="Remplacer"><i class="fas fa-exchange-alt"></i></button>
                <button id="replaceAllBtn" title="Remplacer tout"><i class="fas fa-sync"></i></button>
              </div>
              <button id="closeSearchBtn" title="Fermer"><i class="fas fa-times"></i></button>
            </div>
            <div class="search-info" id="searchInfo">0 résultat</div>
          `;
          
          editorBody.insertBefore(searchPanel, fileEditor);
          
          // Focus sur l'input de recherche
          setTimeout(() => {
            document.getElementById('searchInput').focus();
          }, 100);
          
          // Initialiser la recherche
          initSearch();
        } else {
          // Afficher/masquer le panneau de recherche existant
          searchPanel.style.display = searchPanel.style.display === 'none' ? 'block' : 'none';
          
          if (searchPanel.style.display !== 'none') {
            document.getElementById('searchInput').focus();
          }
        }
      });
      
      // Raccourci clavier Ctrl+F
      fileEditor.addEventListener('keydown', function(e) {
        if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
          e.preventDefault();
          searchBtn.click();
        }
      });
      
      function initSearch() {
        const searchInput = document.getElementById('searchInput');
        const replaceInput = document.getElementById('replaceInput');
        const searchPrev = document.getElementById('searchPrev');
        const searchNext = document.getElementById('searchNext');
        const replaceBtn = document.getElementById('replaceBtn');
        const replaceAllBtn = document.getElementById('replaceAllBtn');
        const closeSearchBtn = document.getElementById('closeSearchBtn');
        const searchInfo = document.getElementById('searchInfo');
        
        let searchResults = [];
        let currentResultIndex = -1;
        
        // Fonction de recherche
        function performSearch() {
          const searchText = searchInput.value;
          const content = fileEditor.value;
          
          // Réinitialiser les résultats
          searchResults = [];
          currentResultIndex = -1;
          
          if (!searchText) {
            searchInfo.textContent = '0 résultat';
            resetHighlight();
            return;
          }
          
          // Trouver toutes les occurrences
          let startIndex = 0;
          let index;
          
          while ((index = content.toLowerCase().indexOf(searchText.toLowerCase(), startIndex)) > -1) {
            // Calculer la position en lignes et colonnes pour faciliter le défilement
            const textBeforeMatch = content.substring(0, index);
            const lines = textBeforeMatch.split('\n');
            const lineNumber = lines.length;
            const columnNumber = lines[lines.length - 1].length + 1;
            
            searchResults.push({
              start: index,
              end: index + searchText.length,
              line: lineNumber,
              column: columnNumber
            });
            
            startIndex = index + 1;
          }
          
          // Mettre à jour l'info de recherche
          updateSearchInfo();
          
          // Naviguer au premier résultat
          if (searchResults.length > 0) {
            currentResultIndex = 0;
            highlightResultWithEffect();
            scrollToCurrentResult();
          } else {
            resetHighlight();
          }
        }

        function scrollToCurrentResult() {
          if (currentResultIndex < 0 || !searchResults.length) return;
          const result = searchResults[currentResultIndex];
          fileEditor.focus();
          fileEditor.setSelectionRange(result.start, result.end);
          const textLines = fileEditor.value.split('\n');
          const lineHeight = parseFloat(getComputedStyle(fileEditor).lineHeight) || 20;
          const resultLine = result.line;
          const resultPosition = (resultLine - 1) * lineHeight;
          const editorHeight = fileEditor.clientHeight;
          const scrollPosition = resultPosition - (editorHeight / 2) + (lineHeight / 2);
          smoothScrollTo(fileEditor, scrollPosition);
        }

        function smoothScrollTo(element, targetPosition) {
          const startPosition = element.scrollTop;
          const distance = targetPosition - startPosition;
          const duration = 300;
          let startTime = null;
          
          function animation(currentTime) {
            if (startTime === null) startTime = currentTime;
            const timeElapsed = currentTime - startTime;
            const progress = Math.min(timeElapsed / duration, 1);
            const easeInOutQuad = t => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;
            element.scrollTop = startPosition + distance * easeInOutQuad(progress);
            if (timeElapsed < duration) {
              requestAnimationFrame(animation);
            } else {
              element.scrollTop = targetPosition;
              highlightResultWithEffect();
            }
          }
          
          requestAnimationFrame(animation);
        }
        
        function updateSearchInfo() {
          if (searchResults.length === 0) {
            searchInfo.textContent = '0 résultat';
            searchInfo.className = 'search-info';
          } else {
            searchInfo.textContent = `${currentResultIndex + 1} sur ${searchResults.length} résultats`;
            searchInfo.className = 'search-info has-results';
          }
        }
        
        function highlightResultWithEffect() {
          const tempHighlight = document.createElement('div');
          tempHighlight.className = 'search-highlight-effect';
          tempHighlight.style.position = 'absolute';
          const selection = window.getSelection();
          if (selection.rangeCount > 0) {
            const range = selection.getRangeAt(0);
            const rect = range.getBoundingClientRect();
            const editorRect = fileEditor.getBoundingClientRect();
            tempHighlight.style.left = (rect.left - editorRect.left) + 'px';
            tempHighlight.style.top = (rect.top - editorRect.top + fileEditor.scrollTop) + 'px';
            tempHighlight.style.width = rect.width + 'px';
            tempHighlight.style.height = rect.height + 'px';
            document.querySelector('.editor-body').appendChild(tempHighlight);
            setTimeout(() => {
              tempHighlight.style.opacity = '0';
              tempHighlight.style.transform = 'scale(1.2)';
              setTimeout(() => {
                tempHighlight.remove();
              }, 400);
            }, 100);
          }
        }

        function nextSearchResult() {
          if (searchResults.length === 0) return;
          
          currentResultIndex = (currentResultIndex + 1) % searchResults.length;
          highlightCurrentResult();
          scrollToCurrentResult();
          updateSearchInfo();
        }
        
        function prevSearchResult() {
          if (searchResults.length === 0) return;
          
          currentResultIndex = (currentResultIndex - 1 + searchResults.length) % searchResults.length;
          highlightCurrentResult();
          scrollToCurrentResult();
          updateSearchInfo();
        }

        function highlightCurrentResult() {
          if (currentResultIndex < 0 || !searchResults.length) return;
          
          const result = searchResults[currentResultIndex];
          fileEditor.focus();
          fileEditor.setSelectionRange(result.start, result.end);
        }

        function resetHighlight() {
          fileEditor.selectionStart = fileEditor.selectionEnd;
        }

        function updateSearchInfo() {
          if (searchResults.length === 0) {
            searchInfo.textContent = '0 résultat';
          } else {
            searchInfo.textContent = `${currentResultIndex + 1} / ${searchResults.length} résultats`;
          }
        }
        
        searchNext.addEventListener('click', function() {
          if (searchResults.length === 0) return;
          
          currentResultIndex++;
          if (currentResultIndex >= searchResults.length) {
            currentResultIndex = 0;
          }
          
          highlightCurrentResult();
          scrollToCurrentResult();
          updateSearchInfo();
        });

        searchPrev.addEventListener('click', function() {
          if (searchResults.length === 0) return;
          
          currentResultIndex--;
          if (currentResultIndex < 0) {
            currentResultIndex = searchResults.length - 1;
          }
          
          highlightCurrentResult();
          scrollToCurrentResult();
          updateSearchInfo();
        });
            
        replaceBtn.addEventListener('click', function() {
          if (currentResultIndex < 0 || !searchInput.value) return;
          
          const result = searchResults[currentResultIndex];
          const content = fileEditor.value;
          
          const newContent = 
            content.substring(0, result.start) + 
            replaceInput.value + 
            content.substring(result.end);
          
          fileEditor.value = newContent;
          
          const lengthDiff = replaceInput.value.length - (result.end - result.start);
          for (let i = currentResultIndex + 1; i < searchResults.length; i++) {
            searchResults[i].start += lengthDiff;
            searchResults[i].end += lengthDiff;
          }
          
          searchResults.splice(currentResultIndex, 1);
          if (currentResultIndex >= searchResults.length) {
            currentResultIndex = searchResults.length - 1;
          }
          
          updateSearchInfo();
          
          if (searchResults.length > 0) {
            highlightResultWithEffect();
          } else {
            resetHighlight();
          }
          
          performSearch();
        });
        
        // Fonction de remplacement de toutes les occurrences
        replaceAllBtn.addEventListener('click', function() {
          if (searchResults.length === 0 || !searchInput.value) return;
          
          const content = fileEditor.value;
          const newContent = content.split(searchInput.value).join(replaceInput.value);
          
          fileEditor.value = newContent;
          
          // Refaire la recherche
          performSearch();
        });
        
        // Fermer le panneau de recherche
        closeSearchBtn.addEventListener('click', function() {
          document.querySelector('.search-panel').style.display = 'none';
          resetHighlight();
        });
        
        // Rechercher au fur et à mesure de la saisie
        searchInput.addEventListener('input', performSearch);
        
        // Raccourcis clavier pour la navigation
        searchInput.addEventListener('keydown', function(e) {
          if (e.key === 'Enter') {
            e.preventDefault();
            if (e.shiftKey) {
              searchPrev.click();
            } else {
              searchNext.click();
            }
          }
        });
      }

      // Enregistrer les modifications de fichier
      saveFileBtn.addEventListener('click', () => {
        const selectedFile = fileSelect.value;
        if (!selectedFile) {
          alert('Veuillez sélectionner un fichier à éditer.');
          return;
        }

        localStorage.setItem(`file_${selectedFile}`, fileEditor.value);
        
        // Générer un fichier pour téléchargement
        generateFileDownload(selectedFile, fileEditor.value);

        fileSuccess.style.display = 'block';
        setTimeout(() => {
          fileSuccess.style.display = 'none';
        }, 3000);
      });

      // Réinitialiser les modifications non enregistrées
      resetFileBtn.addEventListener('click', function() {
        const selectedFile = fileSelect.value;
        
        if (!selectedFile) {
          alert('Aucun fichier sélectionné à réinitialiser.');
          return;
        }
        
        if (confirm('Êtes-vous sûr de vouloir réinitialiser les modifications non enregistrées ?')) {
          const storedContent = localStorage.getItem(`file_${selectedFile}`);
          
          if (storedContent) {
            fileEditor.value = storedContent;
          } else {
            fetch(selectedFile)
              .then(response => {
                if (response.ok) return response.text();
                throw new Error('Fichier non trouvé');
              })
              .then(content => {
                fileEditor.value = content;
              })
              .catch(error => {
                console.error('Erreur de chargement:', error);
                fileEditor.value = `<!-- Contenu de ${selectedFile} -->\n<!-- Éditez ce contenu et cliquez sur Enregistrer pour le sauvegarder -->\n\n<!-- Ce contenu sera disponible pour téléchargement -->`;
              });
          }
        }
      });

      // Gestion des paramètres
      const saveSettingsBtn = document.getElementById('saveSettingsBtn');
      const adminUsername = document.getElementById('adminUsername');
      const adminPassword = document.getElementById('adminPassword');
      const confirmPassword = document.getElementById('confirmPassword');
      const settingsSuccess = document.getElementById('settingsSuccess');
      
      saveSettingsBtn.addEventListener('click', () => {
        const storedCredentials = JSON.parse(localStorage.getItem('adminCredentials'));
        let needsUpdate = false;
        
        if (adminUsername.value.trim() !== '') {
          storedCredentials.username = adminUsername.value.trim();
          needsUpdate = true;
        }
          
        if (adminPassword.value && confirmPassword.value) {
          if (adminPassword.value !== confirmPassword.value) {
            alert('Les mots de passe ne correspondent pas.');
            return;
          }
          storedCredentials.password = CryptoJS.SHA256(adminPassword.value).toString();
          needsUpdate = true;
        }

        if (needsUpdate) {
          localStorage.setItem('adminCredentials', JSON.stringify(storedCredentials));
          adminUsername.value = '';
          adminPassword.value = '';
          confirmPassword.value = '';

          settingsSuccess.style.display = 'block';
          setTimeout(() => {
            settingsSuccess.style.display = 'none';
          }, 3000);
          
          // Générer un fichier de sauvegarde des paramètres
          generateCredentialsBackup();
        } else {
          alert('Aucune modification détectée.');
        }
      });

      // Fonction pour intégrer les annonces dans les pages du site
      window.embedAnnouncements = function() {
        const announcements = JSON.parse(localStorage.getItem('siteAnnouncements') || '[]');
        const announcementContainer = document.getElementById('site-announcements');
        
        if (announcementContainer && announcements.length > 0) {
          let html = '<div class="announcements-section">';
          html += '<h3>📢 Annonces</h3>';
          
          announcements.forEach(announcement => {
            html += `
              <div class="announcement-item">
                <h4>${announcement.title}</h4>
                <p>${announcement.text}</p>
                <small>Publié le ${announcement.date}</small>
              </div>
            `;
          });
          
          html += '</div>';
          announcementContainer.innerHTML = html;
        }
      };

      // Fonctions pour exporter et télécharger des fichiers

      // Générer un fichier JSON des annonces pour téléchargement
      function generateAnnouncementsJson() {
        const announcements = JSON.parse(localStorage.getItem('siteAnnouncements') || '[]');
        const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(announcements, null, 2));
        
        // Créer un lien caché dans le DOM pour le téléchargement
        const downloadLink = document.createElement('a');
        downloadLink.setAttribute("href", dataStr);
        downloadLink.setAttribute("download", "announcements.json");
        downloadLink.style.display = "none";
        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);
      }

      // Générer un fichier HTML pour téléchargement
      function generateFileDownload(filename, content) {
        const dataStr = "data:text/html;charset=utf-8," + encodeURIComponent(content);
        
        const downloadLink = document.createElement('a');
        downloadLink.setAttribute("href", dataStr);
        downloadLink.setAttribute("download", filename);
        downloadLink.style.display = "none";
        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);
      }

      // Générer une sauvegarde des identifiants admin
      function generateCredentialsBackup() {
        const credentials = JSON.parse(localStorage.getItem('adminCredentials'));
        // Nous masquons le mot de passe pour la sécurité
        const safeCredentials = {
          username: credentials.username,
          passwordProtected: true,
          lastChanged: new Date().toISOString()
        };
        
        const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(safeCredentials, null, 2));
        
        const downloadLink = document.createElement('a');
        downloadLink.setAttribute("href", dataStr);
        downloadLink.setAttribute("download", "admin_credentials_backup.json");
        downloadLink.style.display = "none";
        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);
      }

      // Fonction d'exportation complète des données admin
      window.exportAdminData = function() {
        const data = {
          announcements: JSON.parse(localStorage.getItem('siteAnnouncements') || '[]'),
          credentials: JSON.parse(localStorage.getItem('adminCredentials') || '{}'),
          files: {}
        };
        
        // Récupérer tous les fichiers édités
        const fileOptions = fileSelect.options;
        for (let i = 0; i < fileOptions.length; i++) {
          const fileName = fileOptions[i].value;
          if (fileName) {
            const fileContent = localStorage.getItem(`file_${fileName}`);
            if (fileContent) {
              data.files[fileName] = fileContent;
            }
          }
        }
        
        const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(data, null, 2));
        const downloadAnchorNode = document.createElement('a');
        downloadAnchorNode.setAttribute("href", dataStr);
        downloadAnchorNode.setAttribute("download", "admin_backup_" + new Date().toISOString().slice(0, 10) + ".json");
        document.body.appendChild(downloadAnchorNode);
        downloadAnchorNode.click();
        downloadAnchorNode.remove();
      };

      // Fonction d'importation des données admin
      window.importAdminData = function(jsonFile) {
        const reader = new FileReader();
        reader.onload = function(e) {
          try {
            const data = JSON.parse(e.target.result);
            
            if (data.announcements) {
              localStorage.setItem('siteAnnouncements', JSON.stringify(data.announcements));
            }
            
            if (data.credentials && confirm("Voulez-vous également restaurer les identifiants admin?")) {
              localStorage.setItem('adminCredentials', JSON.stringify(data.credentials));
            }
            
            if (data.files) {
              for (const [filename, content] of Object.entries(data.files)) {
                if (content) {
                  localStorage.setItem(`file_${filename}`, content);
                }
              }
            }
            
            alert("Restauration terminée avec succès!");
            location.reload();
            
          } catch (error) {
            alert("Erreur lors de l'importation: " + error.message);
          }
        };
        reader.readAsText(jsonFile);
      };

      // Ajouter des boutons d'export/import dans l'onglet Paramètres
      const settingsPanel = document.querySelector('#settings .content-editor-panel');
      if (settingsPanel) {
        const exportImportHtml = `
          <div class="form-group" style="margin-top: 2rem;">
            <h3 class="section-title">Sauvegarde et restauration</h3>
            <button class="save-btn" onclick="exportAdminData()" style="margin-right: 10px;">
              <i class="fas fa-download"></i> Exporter toutes les données
            </button>
            <label for="importFile" class="import-btn" style="cursor: pointer;">
              <i class="fas fa-upload"></i> Importer une sauvegarde
            </label>
            <input type="file" id="importFile" accept=".json" style="display: none;">
          </div>
        `;
        
        settingsPanel.insertAdjacentHTML('beforeend', exportImportHtml);
        
        document.getElementById('importFile').addEventListener('change', function(e) {
          if (this.files && this.files[0]) {
            importAdminData(this.files[0]);
          }
        });
      }
      
      const contentPanel = document.querySelector('#content .content-editor-panel');
      if (contentPanel) {
        const githubInstructions = `
          <div class="github-instructions" style="margin-top: 2rem; padding: 1rem; background-color: rgba(255,255,255,0.05); border-radius: 8px;">
            <h4 style="margin-bottom: 0.5rem;"><i class="fab fa-github"></i> Mise à jour sur GitHub Pages</h4>
            <p style="margin-bottom: 1rem;">Pour mettre à jour votre site sur GitHub Pages :</p>
            <ol style="padding-left: 1.5rem; margin-bottom: 1rem;">
              <li>Modifiez vos fichiers ici et cliquez sur "Enregistrer les modifications"</li>
              <li>Téléchargez le fichier qui sera généré</li>
              <li>Connectez-vous à votre compte GitHub</li>
              <li>Accédez à votre dépôt (username.github.io)</li>
              <li>Naviguez jusqu'au bon répertoire et téléversez les fichiers modifiés</li>
              <li>Ajoutez un message de commit et confirmez les changements</li>
            </ol>
            <p><i class="fas fa-info-circle"></i> GitHub Pages mettra automatiquement à jour votre site en quelques minutes.</p>
          </div>
        `;
        
        contentPanel.insertAdjacentHTML('beforeend', githubInstructions);
      }

      if (isLoggedIn) {
        loadAnnouncements();
      }
    });

    document.addEventListener('DOMContentLoaded', function() {
      const announcementContainer = document.getElementById('site-announcements');
      
      if (announcementContainer) {
        const announcements = JSON.parse(localStorage.getItem('siteAnnouncements') || '[]');
        
        if (announcements.length > 0) {
          let html = '<div class="announcements-section">';
          html += '<h3>📢 Annonces</h3>';
          
          announcements.forEach(announcement => {
            html += `
              <div class="announcement-item">
                <h4>${announcement.title}</h4>
                <p>${announcement.text}</p>
                <small>Publié le ${announcement.date}</small>
              </div>
            `;
          });
          
          html += '</div>';
          announcementContainer.innerHTML = html;
        }
        
        // Alternative: essayer de charger les annonces depuis un fichier JSON
        else {
          fetch('announcements.json')
            .then(response => {
              if (response.ok) return response.json();
              throw new Error('Pas d\'annonces');
            })
            .then(announcements => {
              if (announcements && announcements.length > 0) {
                let html = '<div class="announcements-section">';
                html += '<h3>📢 Annonces</h3>';
                
                announcements.forEach(announcement => {
                  html += `
                    <div class="announcement-item">
                      <h4>${announcement.title}</h4>
                      <p>${announcement.text}</p>
                      <small>Publié le ${announcement.date}</small>
                    </div>
                  `;
                });
                
                html += '</div>';
                announcementContainer.innerHTML = html;
                
                // Stocker ces annonces dans localStorage pour l'avenir
                localStorage.setItem('siteAnnouncements', JSON.stringify(announcements));
              }
            })
            .catch(error => {
              console.log('Aucune annonce disponible');
            });
        }
      }
    });
  </script>
</body>
</html